<!DOCTYPE html>
<html>

<head>
    <title>FHIR Query Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <link rel="stylesheet" href="./resources/highlightjs-copy.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <link rel="stylesheet" href="./resources/styles.css">
</head>

<body>
    <div class="container">
        <pre class="ascii-art">
 (        )  (    (                                                                         
 )\ )  ( /(  )\ ) )\ )     (                              (             (   (               
(()/(  )\())(()/((()/(   ( )\     (     (   (    (      ( )\    (   (   )\  )\ )   (   (    
 /(_))((_)\  /(_))/(_))  )((_)   ))\   ))\  )(   )\ )   )((_)  ))\  )\ ((_)(()/(  ))\  )(   
(_))_| _((_)(_)) (_))   ((_)_   /((_) /((_)(()\ (()/(  ((_)_  /((_)((_) _   ((_))/((_)(()\  
| |_  | || ||_ _|| _ \   / _ \ (_))( (_))   ((_) )(_))  | _ )(_))(  (_)| |  _| |(_))   ((_) 
| __| | __ | | | |   /  | (_) || || |/ -_) | '_|| || |  | _ \| || | | || |/ _` |/ -_) | '_| 
|_|   |_||_||___||_|_\   \__\_\ \_,_|\___| |_|   \_, |  |___/ \_,_| |_||_|\__,_|\___| |_|   
                                                  |__/                                       
        </pre>
        <form id="query-form">
            <div class="server-container">
                <div class="form-group">
                    <label for="server-url">FHIR Server URL</label>
                    <span id="server-url-error" class="error-message"></span>
                    <input type="text" id="server-url" name="server-url" value="http://hapi.fhir.org/baseR4" />
                </div>
                <div class="form-group">
                    <label for="resource-select">Resource</label>
                    <select id="resource-select" name="resource-select">
                        <!-- Options will be generated dynamically -->
                    </select>
                </div>
                <div class="form-group form-operation-toggle">
                    <input type="checkbox" id="read-operation-toggle" name="read-operation-toggle" class="retro-checkbox">
                    <label for="read-operation-toggle">_id Read Operation<span class="tooltip-text">If checked the _id string will be formatted as [Resource]/[Id] instead of [Resource]?_id=[Id]</span>
                    </label>
                </div>
                <div class="form-group" id="patient-everything-toggle-container" style="display: none;">
                    <input type="checkbox" id="patient-everything-toggle" name="patient-everything-toggle" class="retro-checkbox">
                    <label for="patient-everything-toggle">Patient $everything Operation<span class="tooltip-text">If checked followed by an _id parameter the query string will be formatted as Patient/[Id]/$everything</span>
                    </label>
                </div>
            </div>
            <div id="parameters-container" class="grid-container"></div>
            <div class="form-row">
                <div class="form-col form-group">
                    <label for="parameter-name">Parameter Name</label>
                    <input type="text" id="parameter-name" name="parameter-name" />
                </div>
                <div class="form-col form-group">
                    <label for="parameter-value">Parameter Value</label>
                    <input type="text" id="parameter-value" name="parameter-value" />
                </div>
                <div class="form-col form-group">
                    <button type="button" id="add-parameter-button" class="btn">Add Parameter</button>
                </div>
            </div>
            <button type="submit" id="query-button" class="btn">Query</button>
        </form>
        <div class="result-card">
            <h2>Query Result</h2>
            <pre id="query-string"></pre>
            <button id="previous-page-button" class="btn" style="display: none;">Previous page</button>
            <button id="next-page-button" class="btn" style="display: none;">Next page</button>
            <div id="query-result" class="grid-container"></div>
        </div>
    </div>
    <div id="json-modal" class="modal">
        <div class="modal-content">
            <span id="close-modal" class="close">&times;</span>
            <pre><code id="json-display" class="language-json json-display"></code></pre>
        </div>
    </div>
    <script src="app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js"></script>
    <script src="./resources/highlightjs-copy.min.js"></script>
</body>

</html>